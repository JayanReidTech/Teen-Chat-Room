<script>
    function saveUserData(email, userData) {
        localStorage.setItem(email, JSON.stringify(userData));
    }

    function getUserData(email) {
        return JSON.parse(localStorage.getItem(email));
    }

    function handleSignUp(event) {
        event.preventDefault(); // Prevent page reload
        
        let name = document.querySelector('#signup-form input[type="text"]').value;
        let email = document.querySelector('#signup-form input[type="email"]').value;
        let age = parseInt(document.querySelector('#signup-form input[type="number"]').value);
        let password = document.querySelector('#signup-form input[type="password"]').value;
        let profilePic = document.getElementById('profile-pic').files[0];
        let profilePicURL = profilePic ? URL.createObjectURL(profilePic) : 'default-avatar.png';

        // Owner exception: Bypass restrictions
        if (email === "your-email@example.com") {
            age = 18; // Bypass age check for owner
        }

        if (name && email && password && (age >= 13 && age <= 19)) {
            let userData = { name, email, age, password, profilePicURL };
            saveUserData(email, userData);

            alert('Account created successfully!');
            showForm('login'); // Redirect to login form
        } else {
            alert('Please fill in all fields and ensure your age is between 13 and 19.');
        }
    }

    function handleLogin(event) {
        event.preventDefault();
        
        let email = document.querySelector('#login-form input[type="email"]').value;
        let password = document.querySelector('#login-form input[type="password"]').value;
        let userData = getUserData(email);

        if (userData && userData.password === password) {
            alert('Login successful!');
            window.location.href = 'home.html'; // Redirect to home page
        } else {
            alert('Invalid email or password.');
        }
    }

    function showForm(formType) {
        document.getElementById('welcome-container').style.display = 'none';
        document.getElementById('signup-container').style.display = 'none';
        document.getElementById('login-container').style.display = 'none';
        
        document.getElementById(`${formType}-container`).style.display = 'block';
    }
</script>
